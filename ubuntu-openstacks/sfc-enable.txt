# follow : https://docs.openstack.org/networking-sfc/latest/install/install.html 

Install soft:

juju run --application neutron-api,nova-compute "sudo apt -y install zile"
juju run --application neutron-api,nova-compute "export LC_ALL=C; sudo pip install -c https://git.openstack.org/cgit/openstack/requirements/plain/upper-constraints.txt?h=stable/newton networking-sfc==3.0.0"

juju ssh neutron-api/0
  

# in /etc/neutron/neutron.conf
#add to service_plugins:

  service_plugins=<by juju>,networking_sfc.services.flowclassifier.plugin.FlowClassifierPlugin,networking_sfc.services.sfc.plugin.SfcPlugin

In the same configuration file, specify the driver to use in the plugins. Here we use the OVS driver:

[sfc]
drivers = ovs

[flowclassifier]
drivers = ovs

#After that, restart the neutron-server. 

sudo systemctl restart neutron-server

## DO NOT REBOOT JUJU will scratch changes

Compute nodes

juju ssh nova-compute/0
 in /etc/neutron/plugins/ml2/openvswitch_agent.ini
 Section agent:
 
extensions = sfc

sudo systemctl restart neutron-openvswitch-agent


### PLugin setup on neutron-gateway too ??
to be checked


Database setup

#The database is the standard Neutron database with a few more tables, which can be configured with neutron-db-manage command-line tool:

juju ssh neutron-api/0

sudo neutron-db-manage --subproject networking-sfc upgrade head


On client:
 sudo pip install -c https://git.openstack.org/cgit/openstack/requirements/plain/upper-constraints.txt?h=stable/newton networking-sfc==3.0.0 python-neutronclient

#if issue with the command (stack in python) remove the python packages : sudo apt remove python-keyring (or the one failing)

To test doc is here: 
https://docs.openstack.org/ocata/networking-guide/config-sfc.html

corresponding script in this folder


Then ODL :
